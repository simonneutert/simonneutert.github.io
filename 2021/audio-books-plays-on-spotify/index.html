<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />


<title>Make spotify useful for your favourite audio books and audio plays | Simon Neutert</title>

<meta name="description" content="I am a Ruby (on Rails) developer and open source enthusiast. Super interest in Clojure. Based in Ingelheim, next to Mainz and Wiesbaden (Rhein-Main)." />

<link rel="stylesheet" href="/_bridgetown/static/index.IEH6LJYO.css" data-turbo-track="reload" />

<script src="/_bridgetown/static/index.DMVSTDIN.js" data-turbo-track="reload" defer></script>


    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Simon Neutert" />
  </head>
  <body class="post ">
    <header role="banner">
  <!-- 
  <img src="/images/logo.svg" alt="Logo" />
  -->
</header>

<nav role="navigation" aria-label="Hauptnavigation">
  <ul>
    <li>
      <a href="/" >Home</a>
    </li>
    <li>
      <a href="/posts" >Blog</a>
    </li>
  </ul>
</nav>


    <main>
      <a href="/posts" style="text-decoration:none; text-align=center;">‚ÜñÔ∏è Show all posts</a>

<hr />

<article>

<h1>Make spotify useful for your favourite audio books and audio plays</h1>

<p>It took me quite some nerves, because Spotify made a zero effort attempt linking audio books and plays.</p>

<h2 id="get-the-source-data-from-the-api">get the source data from the API</h2>

<ul>
  <li>make dev account for api access on spotify</li>
  <li>visit https://developer.spotify.com/documentation/web-api/reference/albums/get-several-albums/ then scroll around until you find the ‚Äútry it‚Äù button, it will generate a key, which in turn allows you to curl what you need (pipe to file üòâ)</li>
  <li>extract json using JSONata</li>
</ul>

<h2 id="jsonata">JSONata</h2>

<p>I always wondered how on earth I could put JSONata to use.</p>

<blockquote>
  <p>Lightweight query and transformation language for JSON data
Inspired by the location path semantics of XPath 3.1
Sophisticated query expressions with minimal syntax
Built in operators and functions for manipulating and combining data
Create user-defined functions
Format query results into any JSON output structure</p>
</blockquote>

<h4 id="jsonata-example-for-sherlock-holmes-german">JSONata Example for Sherlock Holmes (German)</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="err">$sort(items</span><span class="p">[</span><span class="err">$contains(name</span><span class="p">,</span><span class="w"> </span><span class="err">'Die</span><span class="w"> </span><span class="err">Originale')</span><span class="p">]</span><span class="err">.</span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="err">name</span><span class="p">,</span><span class="w">
        </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="err">uri</span><span class="p">,</span><span class="w">
        </span><span class="nl">"images"</span><span class="p">:</span><span class="w"> </span><span class="err">images</span><span class="p">,</span><span class="w">
        </span><span class="nl">"spotifyUrl"</span><span class="p">:</span><span class="w"> </span><span class="err">external_urls.spotify</span><span class="p">,</span><span class="w">
        </span><span class="nl">"case"</span><span class="p">:</span><span class="w"> </span><span class="err">$number($split($match(name</span><span class="p">,</span><span class="w"> </span><span class="err">/</span><span class="p">[</span><span class="err">Folge|Fall</span><span class="p">]</span><span class="w"> </span><span class="err">\d+/).match</span><span class="p">,</span><span class="w"> </span><span class="s2">" "</span><span class="err">)</span><span class="p">[</span><span class="mi">-1</span><span class="p">]</span><span class="err">)</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="err">function($l</span><span class="p">,</span><span class="w"> </span><span class="err">$r)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">$l.case</span><span class="w"> </span><span class="err">&gt;</span><span class="w"> </span><span class="err">$r.case</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="err">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="code--result">Code / Result</h3>

<p>Here‚Äôs what I smashed together in two very simple NuxtJS apps.</p>

<p><a href="https://github.com/simonneutert/sherlock-holmes-on-spotify">Sherlock Holmes on Spotify</a></p>

<p><a href="https://github.com/simonneutert/bibi-blocksberg-on-spotify">Bibi Blocksberg on Spotify</a></p>


<hr />

<a id="btn-previous" href="/2021/ruby-on-rodas/" style="text-decoration:none;">‚¨ÖÔ∏è Read previous</a>

<a id="btn-next" href="/2021/rss-telegram/" style="float: right; text-decoration:none;">Read next ‚û°Ô∏è</a>

</article>

    </main>

    <footer>
  <p style="text-align:center"><strong>
    <a href="/feed.xml">Feed</a>
  </strong></p>

  <hr />

  <h6>Imprint</h6>
  <p>
    <strong>Simon Neutert</strong><br />
    <span id="imprint-address">
      Postfach 1120, 55258 Ingelheim
    </span>
  </p>
  <p style="text-align:center"><strong>
    Generated using <a href="https://www.bridgetownrb.com">Bridgetown</a>
  </strong></p>
</footer>

  </body>
</html>
